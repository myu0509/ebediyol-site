<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <title>Ebedi Yol - A Blok</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" type="image/png" href="favicon.png" />
  <style>
    html, body { margin: 0; padding: 0; overflow: hidden; width: 100%; height: 100%; background: #1a1a1a; }
    #renderCanvas { width: 100%; height: 100%; touch-action: none; }
  #createGraveBtn {
  position: fixed;
  top: 15px;
  right: 15px;
  background: rgba(0,0,0,0.55);
  color: white;
  padding: 10px 14px;
  border-radius: 8px;
  font-size: 16px;
  font-weight: bold;
  cursor: pointer;
  z-index: 9999;
    pointer-events: auto;
    pointer-events: all;
}
  </style>
<style>
#mobileControls {
  position: fixed;
  bottom: 30px;
  right: 20px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  z-index: 10;
}

.middleRow {
  display: flex;
  gap: 8px;
}

.ctrl {
  width: 55px;
  height: 55px;
  font-size: 24px;
  border-radius: 10px;
  border: none;
  background: rgba(255,255,255,0.35);
  color: black;
  font-weight: bold;

  user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
  touch-action: none;
}

.ctrl:active {
  background: rgba(255,255,255,0.6);
}
</style>

</head>
<body>
  <canvas id="renderCanvas"></canvas>
  <audio id="birds" src="https://raw.githubusercontent.com/myu0509/ebediyol-site/main/sounds/birds.mp3?raw=1" preload="auto" loop></audio>
<audio id="steps" src="https://raw.githubusercontent.com/myu0509/ebediyol-site/main/sounds/steps.mp3?raw=1" preload="auto"></audio>
  <audio id="prayerSound" src="https://raw.githubusercontent.com/myu0509/ebediyol-site/main/sounds/ihlas.mp3" preload="auto"></audio>
<div id="mobileControls">
  <button class="ctrl" id="btnUp">â–²</button>
  <div class="middleRow">
    <button class="ctrl" id="btnLeft">â—€</button>
    <button class="ctrl" id="btnRight">â–¶</button>
  </div>
  <button class="ctrl" id="btnDown">â–¼</button>
</div>

  <!-- Babylon.js Ã§ekirdek -->
  <script src="https://cdn.babylonjs.com/babylon.js"></script>
  <!-- Babylon GUI (yazÄ± etiketleri iÃ§in GEREKLÄ°) -->
  <script src="https://cdn.babylonjs.com/gui/babylon.gui.min.js"></script>

  <script>
    // --- Temel kurulum ---
    const canvas = document.getElementById("renderCanvas");
    const engine = new BABYLON.Engine(canvas, true, { preserveDrawingBuffer: true, stencil: true });

    const scene = new BABYLON.Scene(engine);
    // âœ… Ses referanslarÄ±
const birds = document.getElementById("birds");
const steps = document.getElementById("steps");
const prayerSound = document.getElementById("prayerSound");

// âœ… Ä°lk tÄ±klamada kuÅŸ sesini baÅŸlat
window.addEventListener("pointerdown", () => {
  try {
    birds.volume = 0.35;
    birds.play().catch(()=>{});
  } catch(e){}
}, { once:true });
    scene.clearColor = new BABYLON.Color3(0.1, 0.15, 0.1);

    // Kamera
    const camera = new BABYLON.UniversalCamera("camera", new BABYLON.Vector3(0, 2, -10), scene);
    camera.attachControl(canvas, true);
    camera.speed = 0.5;
// âœ… Mobil hareket deÄŸiÅŸkenleri
let moveForward = false;
let moveBackward = false;
let moveLeft = false;
let moveRight = false;
let avatar = null;

BABYLON.SceneLoader.ImportMeshAsync(
  "",
  "https://www.babylonjs.com/Scenes/Dude/",
  "Dude.babylon",
  scene
).then((res) => {
  avatar = res.meshes[0];

  // Boy biraz daha uzun
  avatar.scaling = new BABYLON.Vector3(0.016, 0.016, 0.016);

  // Koyu silÃ¼et kÄ±yafet
  const darkMat = new BABYLON.StandardMaterial("darkMat", scene);
  darkMat.diffuseColor = new BABYLON.Color3(0.05, 0.05, 0.05); // siyaha yakÄ±n
  darkMat.specularColor = new BABYLON.Color3(0,0,0);

  // Modeldeki tÃ¼m mesh'lerin malzemesini koyulaÅŸtÄ±r
  res.meshes.forEach(m => {
    m.material = darkMat;
  });

  avatar.position = new BABYLON.Vector3(0, 0, -22);
  avatar.getChildMeshes().forEach(m=>{
    if(m.material){
        m.material = new BABYLON.StandardMaterial("darkMat", scene);
        m.material.diffuseColor = new BABYLON.Color3(0.1, 0.1, 0.1);  // koyu gri
        m.material.specularColor = new BABYLON.Color3(0,0,0);
    }
});
});
// âœ… Klavye kontrolÃ¼
window.addEventListener("keydown", (e) => {
  if (e.key === "w" || e.key === "ArrowUp")    moveForward  = true;
  if (e.key === "s" || e.key === "ArrowDown")  moveBackward = true;
  if (e.key === "a" || e.key === "ArrowLeft")  moveLeft     = true;
  if (e.key === "d" || e.key === "ArrowRight") moveRight    = true;
});

window.addEventListener("keyup", (e) => {
  if (e.key === "w" || e.key === "ArrowUp")    moveForward  = false;
  if (e.key === "s" || e.key === "ArrowDown")  moveBackward = false;
  if (e.key === "a" || e.key === "ArrowLeft")  moveLeft     = false;
  if (e.key === "d" || e.key === "ArrowRight") moveRight    = false;
});

// âœ… Butonlara dokunma olaylarÄ±
const btnUp = document.getElementById("btnUp");
const btnDown = document.getElementById("btnDown");
const btnLeft = document.getElementById("btnLeft");
const btnRight = document.getElementById("btnRight");

if (btnUp) {
  btnUp.addEventListener("touchstart", () => moveForward = true);
  btnUp.addEventListener("touchend", () => moveForward = false);
}

if (btnDown) {
  btnDown.addEventListener("touchstart", () => moveBackward = true);
  btnDown.addEventListener("touchend", () => moveBackward = false);
}

if (btnLeft) {
  btnLeft.addEventListener("touchstart", () => moveLeft = true);
  btnLeft.addEventListener("touchend", () => moveLeft = false);
}

if (btnRight) {
  btnRight.addEventListener("touchstart", () => moveRight = true);
  btnRight.addEventListener("touchend", () => moveRight = false);
}

    // IÅŸÄ±k
    const light = new BABYLON.HemisphericLight("light", new BABYLON.Vector3(0, 1, 0), scene);
    light.intensity = 1.2;

    // Zemin (50x50)
    const ground = BABYLON.MeshBuilder.CreateGround("ground", { width: 50, height: 50 }, scene);
    const groundMat = new BABYLON.StandardMaterial("groundMat", scene);
    groundMat.diffuseColor = new BABYLON.Color3(0.2, 0.35, 0.2);
    ground.material = groundMat;

    // Skybox (gÃ¶kyÃ¼zÃ¼)
    (function addSkybox() {
      const skybox = BABYLON.MeshBuilder.CreateBox("skyBox", { size: 200 }, scene);
      const skyboxMaterial = new BABYLON.StandardMaterial("skyBoxMat", scene);
      skyboxMaterial.backFaceCulling = false;
      skyboxMaterial.disableLighting = true;
      skyboxMaterial.reflectionTexture = new BABYLON.CubeTexture("https://playground.babylonjs.com/textures/skybox", scene);
      skyboxMaterial.reflectionTexture.coordinatesMode = BABYLON.Texture.SKYBOX_MODE;
      skyboxMaterial.diffuseColor = new BABYLON.Color3(0, 0, 0);
      skyboxMaterial.specularColor = new BABYLON.Color3(0, 0, 0);
      skybox.material = skyboxMaterial;
    })();

    // Mezar isimleri (Ã¶rnek liste - 100 mezar iÃ§in dÃ¶ner; olmayanlara "Mezar" yazar)
    const gravesData = [
      "Ahmet YÄ±lmaz","Fatma Demir","Mehmet Aksoy","AyÅŸe Kaya","HÃ¼seyin Arslan","Zeynep Ã‡elik","Ali YÄ±ldÄ±rÄ±m","Emine Kurt","Hasan Ã‡etin","Meryem UÃ§ar",
      "Ä°smail Åžahin","Hatice GÃ¼neÅŸ","Mustafa KoÃ§","Elif Ã–z","Kemal YalÃ§Ä±n","Hacer Bozkurt","Ismail Kuzucu","Fadime KÄ±lÄ±Ã§","Bekir Acar","Rabia Polat"
      // Ä°stersen burayÄ± geniÅŸletebilirsin; liste bittiÄŸinde kalan mezarlara "Mezar" yazÄ±lÄ±r.
    ];

    // Mezarlar (10x10 = 100)
    const graveMat = new BABYLON.StandardMaterial("graveMat", scene);
    graveMat.diffuseColor = new BABYLON.Color3(0.7, 0.7, 0.7);
// âœ… Rastgele kiÅŸi Ã¼retici
function randomName() {
  const firstNames = ["Ahmet","Mehmet","AyÅŸe","Fatma","Mustafa","HÃ¼seyin","Zeynep","Ali","Emine","Hatice","Yunus","Cem","Hasan","Halil","Murat","Seda","GÃ¼l","Rabia","Esra","Kemal"];
  const lastNames  = ["YÄ±lmaz","Demir","Ã‡elik","Arslan","Toprak","Yavuz","Kaya","YÄ±ldÄ±rÄ±m","Ã‡etin","Polat","KoÃ§","Acar","UÃ§ar","Kurt","Kuzucu","Turan","Tekin","Ã–ztÃ¼rk","Kaplan","Kara"];
  const fn = firstNames[Math.floor(Math.random()*firstNames.length)];
  const ln = lastNames[Math.floor(Math.random()*lastNames.length)];
  return fn + " " + ln;
}

function randomBirthYear() {
  return Math.floor(Math.random() * 41) + 1930; // 1930â€“1970
}

function randomDeathYear(birth) {
  return birth + Math.floor(Math.random() * 41) + 30; // 30â€“70 yÄ±l sonra
}

// âœ… 100 kiÅŸilik mezar listesi Ã¼ret
for (let i = 0; i < 100; i++) {
  const birth = randomBirthYear();
  const death = randomDeathYear(birth);
  gravesData.push({
    name: randomName(),
    birth,
    death
  });
}

    const rows = 10, cols = 10;
    const spacingX = 5, spacingZ = 5;
    const startX = -((cols - 1) * spacingX) / 2;
    const startZ = ((rows - 1) * spacingZ) / 2;

    for (let r = 0; r < rows; r++) {
      for (let c = 0; c < cols; c++) {

        // Mezar taÅŸÄ±
        const grave = BABYLON.MeshBuilder.CreateBox(`grave_${r}_${c}`, {
          width: 0.8, height: 1.2, depth: 0.2
        }, scene);
        grave.position.x = startX + c * spacingX;
        grave.position.y = 0.6;
        grave.position.z = startZ - r * spacingZ;
        grave.material = graveMat;
grave.rotation.y = Math.PI;

        // Toprak hÃ¶yÃ¼ÄŸÃ¼
        const mound = BABYLON.MeshBuilder.CreateCylinder(`mound_${r}_${c}`, {
          diameterTop: 1.0,
          diameterBottom: 1.8,
          height: 0.2,
          tessellation: 16
        }, scene);
        mound.scaling.z = 2;
        mound.position.x = grave.position.x;
        mound.position.y = 0.1;
        mound.position.z = grave.position.z - 0.5;
        const moundMat = new BABYLON.StandardMaterial("moundMat", scene);
        moundMat.diffuseColor = new BABYLON.Color3(0.3, 0.2, 0.1);
        mound.material = moundMat;
        mound.rotation.y = Math.PI;

// âœ… Mezar yazÄ±sÄ±
let idx = r * cols + c;
let person = gravesData[idx] ?? null;

let labelText = "Mezar";
if (person) {
  labelText = `${person.name}\n${person.birth} - ${person.death}`;
}

const labelPlane = BABYLON.MeshBuilder.CreatePlane(`label_${idx}`, { width: 0.9, height: 0.45 }, scene);
labelPlane.position = new BABYLON.Vector3(grave.position.x, grave.position.y + 0.45, grave.position.z - 0.16);
labelPlane.billboardMode = BABYLON.Mesh.BILLBOARDMODE_NONE;
labelPlane.rotationQuaternion = null;
labelPlane.rotation = new BABYLON.Vector3(0, 0, 0);

// GUI
const ui = BABYLON.GUI.AdvancedDynamicTexture.CreateForMesh(labelPlane, 512, 256, false);
const bg = new BABYLON.GUI.Rectangle();
bg.thickness = 0;
bg.background = "rgba(0,0,0,0.35)";
ui.addControl(bg);

const text = new BABYLON.GUI.TextBlock();
text.text = labelText;
text.color = "white";
text.fontSize = "70px";
text.textHorizontalAlignment = BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_CENTER;
text.textVerticalAlignment = BABYLON.GUI.Control.VERTICAL_ALIGNMENT_CENTER;
text.outlineColor = "black";
text.outlineWidth = 6;
bg.addControl(text);
// === ALT SEÃ‡ENEK PANELÄ° ===
const optPanel = BABYLON.MeshBuilder.CreatePlane(`opt_${idx}`, { width: 0.9, height: 0.55 }, scene);
optPanel.position = new BABYLON.Vector3(
  grave.position.x,
  grave.position.y - 0.15,   // taÅŸ yazÄ±sÄ±nÄ±n hemen altÄ±
  grave.position.z - 0.16
);
optPanel.billboardMode = BABYLON.Mesh.BILLBOARDMODE_NONE;
const optUI = BABYLON.GUI.AdvancedDynamicTexture.CreateForMesh(optPanel);
optPanel.rotation = new BABYLON.Vector3(0, 0, 0);

// PANEL ARKA PLAN
const listBG = new BABYLON.GUI.Rectangle();
        listBG.width = 1;
listBG.height = 1;
listBG.verticalAlignment = BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP;
listBG.horizontalAlignment = BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_CENTER;
listBG.background = "rgba(0,0,0,0.35)";
listBG.thickness = 0;
optUI.addControl(listBG);

   // Dikey liste
const list = new BABYLON.GUI.StackPanel();
list.isVertical = true;
list.width = 1;
list.height = 1;
list.top = 0;
list.horizontalAlignment = BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_CENTER;
list.verticalAlignment = BABYLON.GUI.Control.VERTICAL_ALIGNMENT_CENTER;
listBG.addControl(list);

// âœ… Dua
const pray = new BABYLON.GUI.TextBlock();
pray.text = "ðŸ•¯  Dua Et";
pray.color = "white";
pray.fontSize = "150px";
pray.height = "200px";
        pray.hoverCursor = "pointer";
list.addControl(pray);
        // Hover bÃ¼yÃ¼t
pray.onPointerEnterObservable.add(() => {
  pray.fontSize = "185px";
});

// Hover eski hÃ¢line dÃ¶n
pray.onPointerOutObservable.add(() => {
  pray.fontSize = "150px";
});
pray.onPointerUpObservable.add(() => {
  try {
    prayerSound.currentTime = 0;
    prayerSound.play().catch(()=>{});
  } catch(e){}
});

// âœ… Ã‡iÃ§ek
const flower = new BABYLON.GUI.TextBlock();
flower.text = "ðŸŒ¸  Ã‡iÃ§ek BÄ±rak";
flower.color = "white";
flower.fontSize = "150px";
flower.height = "200px";
list.addControl(flower);

// âœ… AnÄ± Defteri
const memo = new BABYLON.GUI.TextBlock();
memo.text = "ðŸ“–  AnÄ± Defteri";
memo.color = "white";
memo.fontSize = "150px";
memo.height = "200px";
list.addControl(memo);     
      }
    }

    // Ã‡am aÄŸaÃ§larÄ± (Ã§evreye)
    (function addTrees() {
      function createTree(x, z) {
        const trunk = BABYLON.MeshBuilder.CreateCylinder("trunk", {
          diameterTop: 0.4, diameterBottom: 0.6, height: 2
        }, scene);
        trunk.position.set(x, 1, z);
        const trunkMat = new BABYLON.StandardMaterial("trunkMat", scene);
        trunkMat.diffuseColor = new BABYLON.Color3(0.3, 0.15, 0.05);
        trunk.material = trunkMat;

        const leaves = BABYLON.MeshBuilder.CreateCylinder("leaves", {
          diameterTop: 0.1, diameterBottom: 2.5, height: 3
        }, scene);
        leaves.position.set(x, 3, z);
        const leavesMat = new BABYLON.StandardMaterial("leavesMat", scene);
        leavesMat.diffuseColor = new BABYLON.Color3(0.05, 0.25, 0.1);
        leaves.material = leavesMat;
      }

      const size = 25; // sÄ±nÄ±r yarÄ±Ã§apÄ±
      const step = 5;
      for (let i = -size; i <= size; i += step) {
        createTree(i, -size);
        createTree(i,  size);
        createTree(-size, i);
        createTree( size, i);
      }
    })();
// === Ã‡Ä°TLER ===
(function addFences() {

  // âœ… Yeni koyu ahÅŸap PBR malzeme
  const fenceMat = new BABYLON.PBRMaterial("fenceMat", scene);
  fenceMat.albedoColor = new BABYLON.Color3(0.25, 0.18, 0.10);  // koyu kestane
  fenceMat.roughness = 0.9;
  fenceMat.metallic = 0;

  // âœ… Tek bir Ã§it parÃ§asÄ±
  function makeFence(x, z, rotY = 0) {
    const pole = BABYLON.MeshBuilder.CreateBox("fPole", { width: 0.07, height: 1.2, depth: 0.07 }, scene);
    pole.position.set(x, 0.6, z);
    pole.material = fenceMat;
    const rightBar = BABYLON.MeshBuilder.CreateCylinder("rightBar", {
  diameter: 0.12,
  height: 50,
  tessellation: 12
}, scene);

rightBar.rotation.x = Math.PI / 2;
rightBar.position.set(25, 1.2, 0);
rightBar.material = fenceMat;
const rightBar2 = BABYLON.MeshBuilder.CreateCylinder("rightBar2", {
  diameter: 0.12,
  height: 50,
  tessellation: 12
}, scene);

rightBar2.rotation.x = Math.PI / 2;
rightBar2.position.set(25, 0.7, 0);
rightBar2.material = fenceMat;
const rightBar3 = BABYLON.MeshBuilder.CreateCylinder("rightBar3", {
  diameter: 0.12,
  height: 50,
  tessellation: 12
}, scene);

rightBar3.rotation.x = Math.PI / 2;
rightBar3.position.set(25, 0.2, 0);
rightBar3.material = fenceMat;

// âœ… Sol kenar â€“ kesintisiz uzun bar
const leftBar = BABYLON.MeshBuilder.CreateCylinder("leftBar", {
  diameter: 0.12,
  height: 50,     // 50 birim uzunluk
  tessellation: 12
}, scene);
leftBar.rotation.x = Math.PI / 2;
leftBar.position.set(-25, 1.2, 0);
leftBar.material = fenceMat;
const leftBar2 = BABYLON.MeshBuilder.CreateCylinder("leftBar2", {
  diameter: 0.12,
  height: 50,
  tessellation: 12
}, scene);

// âœ… YATAY
leftBar2.rotation.x = Math.PI / 2;

// âœ… YÃ¼ksekliÄŸi biraz aÅŸaÄŸÄ±
leftBar2.position.set(-25, 0.7, 0);
leftBar2.material = fenceMat;
const leftBar3 = BABYLON.MeshBuilder.CreateCylinder("leftBar3", {
  diameter: 0.12,
  height: 50,
  tessellation: 12
}, scene);

// âœ… YATAY
leftBar3.rotation.x = Math.PI / 2;

// âœ… YÃ¼ksekliÄŸi biraz aÅŸaÄŸÄ±
leftBar3.position.set(-25, 0.2, 0);
leftBar3.material = fenceMat;
    const bar = BABYLON.MeshBuilder.CreateCylinder("fBar", {
  diameter: 0.12,
  height: 1.5,
  tessellation: 12
}, scene);
   
    bar.rotation.z = Math.PI / 2;
    bar.position.set(x, 1.2, z);
    bar.rotation.y = rotY;
    bar.material = fenceMat;
  }
const topBar = BABYLON.MeshBuilder.CreateCylinder("topBar", {
  diameter: 0.12,
  height: 50,
  tessellation: 12
}, scene);

// YATAY
topBar.rotation.z = Math.PI / 2;

// Ãœst kenar â€“ ortalanmÄ±ÅŸ
topBar.position.set(0, 1.2, 25);

topBar.material = fenceMat;
const topBar2 = BABYLON.MeshBuilder.CreateCylinder("topBar2", {
  diameter: 0.12,
  height: 50,
  tessellation: 12
}, scene);

topBar2.rotation.z = Math.PI / 2;
topBar2.position.set(0, 0.7, 25);

topBar2.material = fenceMat;
const topBar3 = BABYLON.MeshBuilder.CreateCylinder("topBar3", {
  diameter: 0.12,
  height: 50,
  tessellation: 12
}, scene);

topBar3.rotation.z = Math.PI / 2;
topBar3.position.set(0, 0.2, 25);

topBar3.material = fenceMat;

  // --- SOL KENAR (X = -25, Z -25 â†’ +25)
  for (let z = -25; z <= 25; z += 2) {
    makeFence(-25, z, Math.PI / 2);
  }

  // --- SAÄž KENAR (X = +25, Z -25 â†’ +25)
  for (let z = -25; z <= 25; z += 2) {
    makeFence(25, z, Math.PI / 2);
  }

  // --- ÃœST KENAR (Z = +25, X -25 â†’ +25)
  for (let x = -25; x <= 25; x += 2) {
    makeFence(x, 25);
  }

})();

    // Yollar (siyah-beyaz/gri, dokusuz â€“ sade)
    (function addRoads() {
      // GiriÅŸ â†’ merkeze dÃ¼z yol
      const mainRoad = BABYLON.MeshBuilder.CreateGround("mainRoad", { width: 3, height: 25 }, scene);
      mainRoad.position.set(0, 0.02, -22); // giriÅŸe yakÄ±n baÅŸlasÄ±n
      const mainRoadMat = new BABYLON.StandardMaterial("mainRoadMat", scene);
      mainRoadMat.diffuseColor = new BABYLON.Color3(0.55, 0.55, 0.55);
      mainRoadMat.specularColor = new BABYLON.Color3(0, 0, 0);
      mainRoad.material = mainRoadMat;

      // MezarlarÄ±n ortasÄ±ndan yatay yol (ince)
      const rowRoad = BABYLON.MeshBuilder.CreateGround("rowRoad", { width: 50, height: 1.5 }, scene);
      rowRoad.position.set(0, 0.02, -0.50);
      const rowRoadMat = new BABYLON.StandardMaterial("rowRoadMat", scene);
      rowRoadMat.diffuseColor = new BABYLON.Color3(0.6, 0.6, 0.6);
      rowRoadMat.specularColor = new BABYLON.Color3(0, 0, 0);
      rowRoad.material = rowRoadMat;
      const pathMat = new BABYLON.PBRMaterial("pathMat", scene);
pathMat.albedoTexture = new BABYLON.Texture("https://www.babylonjs.com/assets/wood.jpg", scene);
pathMat.roughness = 1;
pathMat.metallic = 0;
pathMat.albedoColor = new BABYLON.Color3(0.6, 0.6, 0.6);
pathMat.albedoTexture.uScale = 4;
pathMat.albedoTexture.vScale = 4;

// --- YATAY KALDIRIMLAR (her satÄ±r arasÄ±) ---
for (let r = 0; r < 10; r++) {
  const yPath = BABYLON.MeshBuilder.CreateGround(
    "yPath_" + r,
    { width: 50, height: 0.6 },
    scene
  );
  yPath.position.set(0, 0.021, (22 - r * 5 - 2.5));
  yPath.material = pathMat;
}
// --- DÄ°KEY KALDIRIMLAR (her sÃ¼tun arasÄ±) ---
for (let c = 0; c < 10; c++) {
  const xPath = BABYLON.MeshBuilder.CreateGround(
    "xPath_" + c,
    { width: 0.6, height: 50 },
    scene
  );
  xPath.position.set((-22.5 + c * 5 + 2.5), 0.021, 0);
  xPath.material = pathMat;
}

    })();
// === GÄ°RÄ°Åž DÄ°REKLERÄ° ===
const poleMat = new BABYLON.StandardMaterial("poleMat", scene);
poleMat.diffuseColor = new BABYLON.Color3(0.2, 0.2, 0.2);

// Sol direk
const poleLeft = BABYLON.MeshBuilder.CreateCylinder("poleLeft", {
  diameter: 0.3,
  height: 4
}, scene);
poleLeft.position = new BABYLON.Vector3(-3, 2, -19);
poleLeft.material = poleMat;

// SaÄŸ direk
const poleRight = BABYLON.MeshBuilder.CreateCylinder("poleRight", {
  diameter: 0.3,
  height: 4
}, scene);
poleRight.position = new BABYLON.Vector3(3, 2, -19);
poleRight.material = poleMat;
// === GÄ°RÄ°Åž TABELASI ===
const welcomeSign = BABYLON.MeshBuilder.CreatePlane("welcomeSign", {
  width: 5,
  height: 1.3
}, scene);

// KONUM
welcomeSign.position = new BABYLON.Vector3(0, 3.1, -19);
welcomeSign.rotation = new BABYLON.Vector3(0, 0, 0);
function updateSignScale() {
  if (window.innerWidth < 600) {
    // ðŸ“± mobil
    welcomeSign.scaling = new BABYLON.Vector3(0.45, 0.65, 1);

    poleLeft.position.x  = -2.8;
    poleRight.position.x =  2.8;

  } else if (window.innerWidth < 1000) {
    // tablet
    welcomeSign.scaling = new BABYLON.Vector3(0.75, 1.0, 1);

    poleLeft.position.x  = -3.8;
    poleRight.position.x =  3.8;

  } else {
    // PC
    welcomeSign.scaling = new BABYLON.Vector3(1, 1.3, 1);

    poleLeft.position.x  = -4.8;
    poleRight.position.x =  4.8;
  }
}

updateSignScale();
window.addEventListener("resize", updateSignScale);

// === PANEL ARKA PLAN ===
const welcomeTexture = BABYLON.GUI.AdvancedDynamicTexture.CreateForMesh(welcomeSign);

// DikdÃ¶rtgen arka plan
const bg = new BABYLON.GUI.Rectangle();
bg.thickness = 0;
bg.background = "rgba(60, 40, 20, 0.85)";   // Kahverengi tabela gÃ¶rÃ¼nÃ¼mÃ¼
welcomeTexture.addControl(bg);

// YazÄ±
const welcomeText = new BABYLON.GUI.TextBlock();
welcomeText.text = "EBEDÄ°YOL MEZARLIÄžI";
welcomeText.color = "white";
welcomeText.fontSize = "85px";
welcomeText.outlineWidth = 6;
welcomeText.outlineColor = "black";
bg.addControl(welcomeText);

    // Kamera sÄ±nÄ±rÄ± + yÃ¼kseklik sabitleme
    scene.onBeforeRenderObservable.add(() => {
      // Kamera avatarÄ± takip etsin
if (avatar) {
  camera.position.x = avatar.position.x - 4 * Math.sin(camera.rotation.y);
  camera.position.z = avatar.position.z - 4 * Math.cos(camera.rotation.y);
  camera.position.y = avatar.position.y + 1.8;
}
if (typeof window.__stepCd === "undefined") window.__stepCd = 0;
const dt = engine.getDeltaTime();
window.__stepCd = Math.max(0, window.__stepCd - dt);

// âœ… AdÄ±m sesi â€” sadece yÃ¼rÃ¼rken
if (avatar && steps) {
  const moving = (moveForward || moveBackward);
  
  if (moving) {
    if (steps.paused) {
      steps.currentTime = 0;
      steps.play().catch(()=>{});
    }
  } else {
    steps.pause();
  }
}


      // âœ… Mobil hareket uygula
let moveSpeed = 0.11;

if (moveForward && avatar) {
  avatar.position.z += moveSpeed * Math.cos(camera.rotation.y);
  avatar.position.x += moveSpeed * Math.sin(camera.rotation.y);
}

if (moveBackward && avatar) {
  avatar.position.z -= moveSpeed * Math.cos(camera.rotation.y);
  avatar.position.x -= moveSpeed * Math.sin(camera.rotation.y);
}

if (moveLeft) {
  camera.rotation.y -= 0.04;
}

if (moveRight) {
  camera.rotation.y += 0.04;
}
if (avatar) {
  avatar.rotation.y = camera.rotation.y;
}
// Avatar sÄ±nÄ±r kontrolÃ¼
if (avatar) {
  if (avatar.position.x > 25) avatar.position.x = 25;
  if (avatar.position.x < -25) avatar.position.x = -25;
  if (avatar.position.z > 25) avatar.position.z = 25;
  if (avatar.position.z < -25) avatar.position.z = -25;
}

      if (camera.position.x > 25) camera.position.x = 25;
      if (camera.position.x < -25) camera.position.x = -25;
      if (camera.position.z > 25) camera.position.z = 25;
      if (camera.position.z < -25) camera.position.z = -25;

      if (camera.position.y < 1.6) camera.position.y = 1.6;
      if (camera.position.y > 3.0) camera.position.y = 3.0;
    });

    // Render dÃ¶ngÃ¼sÃ¼
    engine.runRenderLoop(() => scene.render());
    window.addEventListener("resize", () => engine.resize());
  
  </script>

  <div id="createGraveBtn">Mezar TaÅŸÄ± OluÅŸtur</div>
<div id="graveFormBox" style="
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: rgba(0,0,0,0.85);
  padding: 20px;
  border-radius: 8px;
  z-index: 99999;
  width: 260px;
  display: none;
  color: white;
  font-family: Arial;
">
  <form id="graveForm" action="https://formsubmit.co/ebediyol@outlook.com" method="POST">
  <h3 style="margin-top:0;">Mezar Bilgisi</h3>

  <label>Ad Soyad:</label><br>
  <input id="graveName" name="name" type="text" style="width:100%; margin-bottom:10px;"><br>

  <label>DoÄŸum YÄ±lÄ±:</label><br>
  <input id="birthYear" name="birthYear" type="number" style="width:100%; margin-bottom:10px;"><br>

  <label>Vefat YÄ±lÄ±:</label><br>
  <input id="deathYear" name="deathYear" type="number" style="width:100%; margin-bottom:10px;"><br>

  <button id="sendFormBtn" style="
    width:100%;
    padding:8px;
    background:#2b9348;
    border:none;
    color:white;
    font-size:15px;
    border-radius:6px;
    cursor:pointer;
  ">GÃ¶nder</button>
    <input type="hidden" name="_next" value="">
    <input type="hidden" name="_subject" value="Yeni Mezar Talebi">
    <input type="hidden" name="_captcha" value="false">
  </form>
</div>
    <script>
  document.getElementById("createGraveBtn").addEventListener("click", () => {
    document.getElementById("graveFormBox").style.display = "block";
  });
      </script>
<script>
  document.getElementById("sendFormBtn").addEventListener("click", (e) => {
    e.preventDefault();

    const form = document.getElementById("graveForm");
    const data = new FormData(form);

    fetch(form.action, {
  method: "POST",
  body: data,
  headers: { "Accept": "application/json" }
});

    alert("Bilgileriniz alÄ±nmÄ±ÅŸtÄ±r. Mezar taÅŸÄ±nÄ±z gÃ¼n iÃ§inde hazÄ±rlanacaktÄ±r.");
    document.getElementById("graveFormBox").style.display = "none";
  });
</script>
</body>
</html>
